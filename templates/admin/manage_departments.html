{% extends "admin/layout_admin.html" %}

{% block content %}
<div class="admin-header">
    <h1 style="color: var(--text-light);">Manage Departments</h1>
</div>

<div class="glass-card" style="padding: 30px; margin-bottom: 40px;">
    <h3 style="margin-bottom: 20px; color: var(--primary);">Add New Department</h3>
    <form method="POST" enctype="multipart/form-data">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Department ID (e.g. cse,
                    aids)</label>
                <input type="text" name="id" class="form-control" placeholder="Unique ID (no spaces)"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Department Name</label>
                <input type="text" name="name" class="form-control" required
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Icon Class
                    (FontAwesome)</label>
                <input type="text" name="icon" placeholder="fas fa-laptop-code" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Theme Color</label>
                <input type="text" name="theme_color" placeholder="#ef4444 or var(--primary)" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Tagline</label>
                <input type="text" name="tagline" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Intake (Seats)</label>
                <input type="number" name="intake" value="60" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div style="grid-column: span 2;">
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Description</label>
                <textarea name="description" rows="3" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;"></textarea>
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Vision (Optional)</label>
                <textarea name="vision" rows="2" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;"></textarea>
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Mission (Optional)</label>
                <textarea name="mission" rows="2" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;"></textarea>
            </div>
        </div>

        <h4
            style="margin: 20px 0 10px; color: var(--text-light); border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
            HOD Details</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">HOD Name</label>
                <input type="text" name="hod_name" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">HOD Role</label>
                <input type="text" name="hod_role" value="Head of Department" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">HOD Quote</label>
                <input type="text" name="hod_quote" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">HOD Image</label>
                <input type="file" name="hod_image" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
        </div>

        <button type="submit" class="btn btn-primary" style="margin-top: 20px;">Add Department</button>
    </form>
</div>

<div class="glass-card" style="padding: 30px;">
    <h3 style="margin-bottom: 20px; color: var(--text-light);">Current Departments</h3>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Theme Color</th>
                <th>Intake</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for dept in departments %}
            <tr>
                <td>{{ dept.id }}</td>
                <td>{{ dept.name }}</td>
                <td><span
                        style="display: inline-block; width: 20px; height: 20px; background: {{ dept.theme_color }}; border-radius: 50%; vertical-align: middle;"></span>
                    {{ dept.theme_color }}</td>
                <td>{{ dept.intake }}</td>
                <td>
                    <a href="{{ url_for('delete_department', dept_id=dept.id) }}" class="action-btn btn-delete"
                        onclick="return confirm('Are you sure you want to delete this department? This cannot be undone.')"><i
                            class="fas fa-trash"></i></a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}